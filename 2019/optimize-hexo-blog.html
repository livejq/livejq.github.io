<!DOCTYPE html><html class="scrollbar"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>Hexo博客的优化问题 | liveJQ</title><meta name="author" content="liveJQ"><meta name="keywords" content="Hexo,博客优化,网页加载缓慢"><meta name="description" content="Hexo博客的优化问题，如何提升网站访问速度"><meta name="baidu-site-verification" content="MN5KDkxxm6"><link rel="shortcut icon" href="/img/favicon.png"><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hack-font@3/build/web/hack-subset.css" type="text/css"><link rel="stylesheet" href="/css/style.css"><!-- Custom --><script>document.onkeydown = function (e) {
      var keyCode = e.keyCode || e.which || e.charCode;
      if (keyCode == 123) {
        e.returnValue = false;
      }
    }
    document.oncontextmenu = function () {
      return false;
    }</script><link rel="stylesheet" href="/css/prism-dark.css" type="text/css"><link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><!-- Preloader --><div id="preloader"><div class="pre-container"><div class="transition"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div></div><!-- header --><header class="fixbackground" data-img-mode="normal" data-normal-src="/img/0.svg" data-random-max="11" data-random-src="/img/Random-img/"><div class="mask"><div class="h-header"><div id="logo-S"><a href="/"><img src="/img/logo.png" alt="Logo"></a></div><!-- Navigation in header(id="navigation-S") --><div id="navigation-S"><ul><li class="menu-home"><a href="/" class="menu-item-home">主页</a></li><li class="menu-archive"><a href="/archives/" class="menu-item-archive">归档</a></li><li class="menu-about"><a href="/about/" class="menu-item-about">关于</a></li><li class="menu-friends"><a href="/friends/" class="menu-item-friends">友链</a></li><li class="menu-gallery"><a href="/gallery/" class="menu-item-gallery">相册</a></li><li class="menu-search"><a href="javascript:;" class="popup-trigger" title="Search">搜索</a></li></ul></div></div><div class="h-body"><!-- motto --><div id="page-motto"><p class="motto"></p></div><div id="navigation-H"><!-- Page title --><p>当前文章&nbsp;:&nbsp;《Hexo博客的优化问题》</p><!-- Progress bar --><div id="progress-bar"></div><!-- Progress percent --><div id="progress-percentage"><h1>0.0%</h1></div></div></div><div class="h-footer"><a href="javascript:;" id="read-more" class="arrow"></a></div></div></header><!-- Navigation in div(id="navigation-H") --> <a class="nav-trigger"><span></span></a><nav class="nav-container" id="cd-nav"><div class="nav-header"><h3>Navigation</h3><a href="javascript:;" class="nav-close"></a></div><div class="nav-body"><ul><li class="menu-home"><a href="/" class="menu-item-home">主页</a></li><li class="menu-archive"><a href="/archives/" class="menu-item-archive">归档</a></li><li class="menu-about"><a href="/about/" class="menu-item-about">关于</a></li><li class="menu-friends"><a href="/friends/" class="menu-item-friends">友链</a></li><li class="menu-gallery"><a href="/gallery/" class="menu-item-gallery">相册</a></li><li class="menu-search"><a href="javascript:;" class="popup-trigger" title="Search">搜索</a></li></ul></div><div class="nav-footer"><ul><li><a href="https://github.com/livejq" target="_blank"><i class="fab fa-github"></i></a></li><li><a href="mailto:cloud@livejq.fun" target="_blank"><i class="far fa-envelope"></i></a></li><li><a href="https://t.me/livejq" target="_blank"><i class="fab fa-telegram"></i></a></li><li><a href="https://www.livejq.top/atom.xml" target="_blank"><i class="fas fa-rss"></i></a></li><li><a href="https://myssl.com/www.livejq.top?from=mysslid" target="_blank"><i class="fab fa-expeditedssl"></i></a></li></ul></div></nav><!--main--><main><div class="layout-post"><div class="article-title"><a href="/2019/optimize-hexo-blog.html" itemprop="url" target="_blank">Hexo博客的优化问题</a></div><div class="article-meta"><span>发布于 <a href="/2019/optimize-hexo-blog.html" itemprop="url"><time datetime="2019-04-27T07:04:15.000Z" itemprop="datePublished">2019-04-27 </time></a>/ 更新于 <a href="/2019/optimize-hexo-blog.html" itemprop="url"><time datetime="2019-04-27T07:04:15.000Z" itemprop="dateUpdated">2020-10-22 </time></a></span>/ <span><i class="fas fa-tags"></i> <a href="javascript:void(0)">SEO </a></span>/<!-- leancloud --> <span id="/2019/optimize-hexo-blog.html" class="leancloud_visitors" data-flag-title="Hexo博客的优化问题"><i class="fab fa-hotjar" aria-hidden="true"></i> <i class="leancloud-visitors-count" aria-hidden="true"></i></span></div><div class="article-content" id="article-content"><h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>刚搭好博客后觉得还不错，很好，很精致。但久了之后就发现其中还存在的问题（访问加载速度太慢了），而这还是通过别人的提醒后才真正着手去处理的。</p><p><img src="/img/cut-pic/19-4-27/reason.png" alt="reason.png"></p><p>一般人的做法都是先通过搜索引擎看看有没有人解决过类似的问题，但我经过一番折腾后发现，这些都比较旧，而且只是适应他们自己的网站优化的，所以通过各种比较，悉知共性后，自己查找资料文档来逐步解决。</p><h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><p>先在Firefox中输入我的博客网址，然后点击分析（一个时钟图标）按钮即可。</p><p>我这里使用了一个很好用的工具<br><a href="https://developer.mozilla.org/en-US/docs/Tools/Network_Monitor" target="_blank" rel="noopener">Firefox性能分析工具</a></p><p>打开网络监视器有几种不同的方法：</p><ul><li>按 Ctrl+ Shift+ E（Mac上为Command+ Option+ E）。</li><li>从Web Developer菜单中选择“Network”（这是OS X和Linux上Tools菜单的子菜单）。</li><li>按F12后点击上面的“网络”菜单</li></ul><p><img src="/img/cut-pic/19-4-27/network_analysis_tool.png" alt="network_analysis_tool.png"></p><p>刚开始我是用chrome的Network工具，结果（极度失望）：</p><p><img src="/img/cut-pic/19-4-27/so_slow.png" alt="so_slow.png"></p><p>当时没认真截图，但这张图也充分反映出了核心的问题：图片分辨率太大，就17.jpg这张图就耗费了1分钟，加载时间主要花费在图片上了。</p><p><strong>解决办法：</strong></p><ol><li>少发送请求<br>把要加载的js文件（css文件同理）合并成一个（尽量少）文件，则可以向服务器少发送请求，从而减少等待时间。</li></ol><ol start="2"><li>压缩文件<br>使用压缩之后的js、css、img文件，同样可以减少请求时间。</li></ol><ol start="3"><li>Css Sprite<br>这是css的一项技术，将图片尽可能多的合并成一个图片文件（例如：如果用到很多图标的话），第一次使用的时候加载这张图片，然后浏览器会缓存下来，其他地方再使用的时候就不需要重新请求了。</li></ol><ol start="4"><li>js／css位置<br>css引用建议放在head标签里面；js脚本建议放到body内容的最后，原因：等待js加载或者脚本有错误的时候不会影响html页面的展示。</li></ol><h2 id="GULP自动化构建工具"><a href="#GULP自动化构建工具" class="headerlink" title="GULP自动化构建工具"></a>GULP自动化构建工具</h2><hr><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul><li>gulp是前端开发过程中对代码进行构建的工具，是自动化项目的构建利器；她不仅能对网站资源进行优化，而且在开发过程中很多重复的任务能够使用正确的工具自动完成；使用她，我们不仅可以很愉快的编写代码，而且大大提高我们的工作效率。</li></ul><ul><li><p>gulp是基于Nodejs的自动任务运行器， 她能自动化地完成 javascript/coffee/sass/less/html/image/css 等文件的的测试、检查、合并、压缩、格式化、浏览器自动刷新、部署文件生成，并监听文件在改动后重复指定的这些步骤。在实现上，她借鉴了Unix操作系统的管道（pipe）思想，前一级的输出，直接变成后一级的输入，使得在操作上非常简单。通过本文，我们将学习如何使用Gulp来改变开发流程，从而使开发更加快速高效。</p></li><li><p>gulp 和 grunt 非常类似，但相比于 grunt 的频繁 IO 操作，gulp 的流操作，能更快地更便捷地完成构建工作。</p></li></ul><h3 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h3><p>这个使用需要用到两个文件：gulpfile.js和package.json文件，它们都放在项目的根目录下。</p><h4 id="gulpfile-js："><a href="#gulpfile-js：" class="headerlink" title="gulpfile.js："></a><strong>gulpfile.js：</strong></h4><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> cleanCSS <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-clean-css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> uglify <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-uglify'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pipeline <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'readable-stream'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>pipeline<span class="token punctuation">;</span>
<span class="token keyword">var</span> htmlmin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-htmlmin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> imagemin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-imagemin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 压缩 /public/css 目录中的css文件</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'compress-css'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./public/css/*.css'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">cleanCSS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>compatibility<span class="token punctuation">:</span> <span class="token string">'ie8'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./public/css'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">/</span><span class="token operator">/</span> 压缩 <span class="token operator">/</span><span class="token keyword">public</span><span class="token operator">/</span><span class="token number">2018</span> 目录中的html文件
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'compress-html2018'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./public/2018/**/*.html'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">htmlmin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> collapseWhitespace<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./public/2018'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 压缩 /public/2019 目录中的html文件</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'compress-html2019'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./public/2019/**/*.html'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">htmlmin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> collapseWhitespace<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./public/2019'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 压缩 /public/js 目录中的js文件</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'compress-js'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">pipeline</span><span class="token punctuation">(</span>
        gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./public/js/*.js'</span><span class="token punctuation">,</span> <span class="token string">'!./public/js/search.js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./public/js'</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">/</span><span class="token operator">/</span> 压缩 <span class="token operator">/</span><span class="token keyword">public</span><span class="token operator">/</span>img 目录中的图片
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'compress-images'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> stream <span class="token operator">=</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./public/img/**/*.*'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">imagemin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
          imagemin<span class="token punctuation">.</span><span class="token function">gifsicle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>interlaced<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          imagemin<span class="token punctuation">.</span><span class="token function">jpegtran</span><span class="token punctuation">(</span><span class="token punctuation">{</span>progressive<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          imagemin<span class="token punctuation">.</span><span class="token function">optipng</span><span class="token punctuation">(</span><span class="token punctuation">{</span>optimizationLevel<span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          imagemin<span class="token punctuation">.</span><span class="token function">svgo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                  <span class="token punctuation">{</span>removeViewBox<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token punctuation">{</span>cleanupIDs<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span>
              <span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./public/img'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> stream<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 默认任务 gulp 4.0 适用的方式</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span> gulp<span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">parallel</span><span class="token punctuation">(</span><span class="token string">'compress-js'</span><span class="token punctuation">,</span> <span class="token string">'compress-html2018'</span><span class="token punctuation">,</span> <span class="token string">'compress-html2019'</span>
 <span class="token comment" spellcheck="true">//build the website</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以上文件中的用法,需根据自己的项目来配置，底部的参考文献中有详细的解释，因此不再赘述。</p><p><span style="color:red"><strong>温馨提示：</strong></span>**为匹配当前所有目录。</p><h4 id="异步执行task"><a href="#异步执行task" class="headerlink" title="异步执行task"></a>异步执行task</h4><p>有时候执行完会遇到Did you forget to ….等字样的信息,是因为你没有使用异步的方式执行task中的function。这里给出官方提供的三种方式：</p><ol><li>接受一个 callback</li></ol><pre class="line-numbers language-javascript"><code class="language-javascript">
<span class="token comment" spellcheck="true">// 在 shell 中执行一个命令</span>
<span class="token keyword">var</span> exec <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'child_process'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exec<span class="token punctuation">;</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'jekyll'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// 编译 Jekyll</span>
  <span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'jekyll build'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">cb</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 返回 error</span>
    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 完成 task</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>返回一个 stream</li></ol><pre class="line-numbers language-javascript"><code class="language-javascript">
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'somename'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> stream <span class="token operator">=</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'client/**/*.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">minify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'build'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> stream<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>返回一个 promise</li></ol><pre class="line-numbers language-javascript"><code class="language-javascript">
<span class="token keyword">var</span> Q <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'q'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'somename'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> deferred <span class="token operator">=</span> Q<span class="token punctuation">.</span><span class="token function">defer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">// 执行异步的操作</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    deferred<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> deferred<span class="token punctuation">.</span>promise<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="package-json："><a href="#package-json：" class="headerlink" title="package.json："></a><strong>package.json：</strong></h4><pre class="line-numbers language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"hexo-site"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"hexo"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"3.8.0"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"braces"</span><span class="token operator">:</span> <span class="token string">"^2.3.1"</span><span class="token punctuation">,</span>
    <span class="token property">"clean-css"</span><span class="token operator">:</span> <span class="token string">"^4.1.11"</span><span class="token punctuation">,</span>
    <span class="token property">"gulp-minify-css"</span><span class="token operator">:</span> <span class="token string">"^1.2.4"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo"</span><span class="token operator">:</span> <span class="token string">"^3.7.0"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo-deployer-git"</span><span class="token operator">:</span> <span class="token string">"^1.0.0"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo-generator-archive"</span><span class="token operator">:</span> <span class="token string">"^0.1.5"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo-generator-category"</span><span class="token operator">:</span> <span class="token string">"^0.1.3"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo-generator-feed"</span><span class="token operator">:</span> <span class="token string">"^1.2.2"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo-generator-index"</span><span class="token operator">:</span> <span class="token string">"^0.2.1"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo-generator-search-zip"</span><span class="token operator">:</span> <span class="token string">"0.0.1"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo-generator-tag"</span><span class="token operator">:</span> <span class="token string">"^0.2.0"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo-prism-plugin"</span><span class="token operator">:</span> <span class="token string">"^2.3.0"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo-renderer-ejs"</span><span class="token operator">:</span> <span class="token string">"^0.3.1"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo-renderer-marked"</span><span class="token operator">:</span> <span class="token string">"^0.3.2"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo-renderer-stylus"</span><span class="token operator">:</span> <span class="token string">"^0.3.3"</span><span class="token punctuation">,</span>
    <span class="token property">"hexo-server"</span><span class="token operator">:</span> <span class="token string">"^0.3.1"</span><span class="token punctuation">,</span>
    <span class="token property">"marked"</span><span class="token operator">:</span> <span class="token string">"^0.6.2"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"gulp"</span><span class="token operator">:</span> <span class="token string">"^4.0.1"</span><span class="token punctuation">,</span>
    <span class="token property">"gulp-clean-css"</span><span class="token operator">:</span> <span class="token string">"^4.2.0"</span><span class="token punctuation">,</span>
    <span class="token property">"gulp-htmlclean"</span><span class="token operator">:</span> <span class="token string">"^2.7.22"</span><span class="token punctuation">,</span>
    <span class="token property">"gulp-htmlmin"</span><span class="token operator">:</span> <span class="token string">"^5.0.1"</span><span class="token punctuation">,</span>
    <span class="token property">"gulp-imagemin"</span><span class="token operator">:</span> <span class="token string">"^5.0.3"</span><span class="token punctuation">,</span>
    <span class="token property">"gulp-rename"</span><span class="token operator">:</span> <span class="token string">"^1.4.0"</span><span class="token punctuation">,</span>
    <span class="token property">"gulp-uglify"</span><span class="token operator">:</span> <span class="token string">"^3.0.2"</span><span class="token punctuation">,</span>
    <span class="token property">"pump"</span><span class="token operator">:</span> <span class="token string">"^3.0.0"</span><span class="token punctuation">,</span>
    <span class="token property">"readable-stream"</span><span class="token operator">:</span> <span class="token string">"^3.3.0"</span><span class="token punctuation">,</span>
    <span class="token property">"uglify-js"</span><span class="token operator">:</span> <span class="token string">"^3.5.9"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个文件中主要得区分dependencies和devDependencies，前者为全局依赖，后者为此项目开发下的依赖。安装时的区别为:</p><ol><li><p>全局安装 gulp<br>$ npm install –global gulp</p></li><li><p>作为项目的开发依赖（devDependencies）安装：<br>$ npm install –save-dev gulp</p></li></ol><p>在Git Bash下进入博客根目录下，然后键入上述命令之后还得安装如下插件：（注意最好用–save-dev）</p><pre class="line-numbers language-text"><code class="language-text">    gulp-clean-css
    gulp-htmlclean
    gulp-htmlmin
    gulp-imagemin
    gulp-rename
    gulp-uglify
    readable-stream<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>之后只要按顺序输入以下命令即可：</p><pre class="line-numbers language-text"><code class="language-text">    hexo clean
    hexo g
    gulp
    hexo d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>其中的gulp执行结果显示：</p><pre class="line-numbers language-CLI"><code class="language-CLI">$ gulp
[11:51:49] Using gulpfile F:\blog\blog\gulpfile.js
[11:51:49] Starting 'default'...
[11:51:49] Starting 'compress-images'...
[11:51:49] Starting 'compress-js'...
[11:51:49] Starting 'compress-html2018'...
[11:51:49] Starting 'compress-html2019'...
[11:51:52] Finished 'compress-html2018' after 2.69 s
[11:51:53] Finished 'compress-js' after 3.58 s
[11:51:53] Finished 'compress-html2019' after 3.63 s
[11:53:03] gulp-imagemin: Minified 81 images (saved 2.87 MB - 13.1%)
[11:53:03] Finished 'compress-images' after 1.22 min
[11:53:03] Finished 'default' after 1.22 min<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="压缩后的结果："><a href="#压缩后的结果：" class="headerlink" title="压缩后的结果："></a>压缩后的结果：</h3><p>img原来大小：121MB 压缩后大小：113MB(其中有很多没用到的图片，后面已移除)<br>js原来大小:468KB 压缩后大小:222KB<br>css原来大小:46.3KB 压缩后大小:67.5KB（这个压缩后反而更大。。暂时搞不清楚，所以就不压缩了）</p><p><img src="/img/cut-pic/19-4-27/analyse_first.png" alt="analyse_first.png"><br><img src="/img/cut-pic/19-4-27/analyse_first_min.png" alt="analyse_first_min.png"></p><p>重新访问后速度没提升多少，图片还是太大，而且我还发现其中还存在一个问题，就是有部分访问响应结果为404之类的错误，严重拖慢了加载的速度，然后我根据问题的来源，（就是一些时间脚本，还有leancloud评论功能加载错误导致的）解决后，我意外获得了一个jpg图片压缩工具。</p><p><img src="/img/cut-pic/19-4-27/jpg_tool.png" alt="jpg_tool.png"></p><p>经本人测试，效果与原图保持相同的最低图片压缩比就30了，低于30图片会失真，工具应该网上都有。</p><p><strong>21张jpg，总共13.9MB，压缩后为4MB</strong></p><h3 id="再次测试结果："><a href="#再次测试结果：" class="headerlink" title="再次测试结果："></a>再次测试结果：</h3><p>为了确保由于网速问题，先检查一下（前几次很可能是网速问题：T）：<br><img src="/img/cut-pic/19-4-27/web_speed.png" alt="web_speed.png"></p><p>然后再次测试：</p><p><img src="/img/cut-pic/19-4-27/analyse_second.png" alt="analyse_second.png"><br><img src="/img/cut-pic/19-4-27/analyse_second_min.png" alt="analyse_second_min.png"></p><p>到这里可以看出，还是图片的问题，我只能说美观得有代价。除非把图片都改成分辨率为800x300的那种（我这些都是1920x990以上的），如今只能将图片大小尽量控制在200KB一下会好一点。以上测试每次都是清除了缓存后再测的，第二次访问加载还是很快的。(尴尬的微笑~)</p><p>最终结果：<br><img src="/img/cut-pic/19-4-27/finish.png" alt="finish.png"></p><h2 id="错误解决办法"><a href="#错误解决办法" class="headerlink" title="错误解决办法:"></a><span style="color:red"><strong>错误解决办法:</strong></span></h2><p>如果gulp命令出现err,说是找不到某某模块，则可键入命令npm install来重新构建所需模块,若此命令还出现如下问题：</p><pre><code>npm WARN checkPermissions Missing write access to F:\blog\blog\node_modules\</code></pre><p>则直接将你的node_modules目录删除，然后重新以管理员身份重新npm install即可。</p><p>若安装出现什么npm audit fix等之类的，则可以先键入命令npm audit来进行所有插件的审阅，分析出所需插件的特定版本号，然后根据版本号和所需插件名，在package.json中的dependencies添加即可(^这个符号意思是不小于大版本号)</p><hr><p>前面的解决办法只是<code>治标不治本</code>的，要想显著提升访问速度，根源还是在<code>服务器</code>上。我这个服务器是借助于 Github 的，外国的服务器，访问有一定速度限制和固定 ip 段的约束（Google为例吧），一般都很慢。最好的做法是将<code>站点</code>放在国内的云服务器上，然后申请个<code>域名</code>，这个暂时不搞，一没钱二没时间​ emmm~​。</p><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><blockquote><ol><li><a href="http://www.ydcss.com/archives/18#lesson3" rel="noopener" target="_blank">gulp详细入门教程</a></li><li><a href="https://www.gulpjs.com.cn/" rel="noopener" target="_blank">gulp中文网</a></li><li><a href="http://luckykun.com/work/2016-07-10/hexo-faster.html" rel="noopener" target="_blank">hexo博客进阶－性能优化</a></li></ol></blockquote></div><div class="livejq-personal"><div class="row text-center" style="padding: 50px 0;border-top: 1px dashed #E7E7E7;"><b><p style="font-size:16px;margin-bottom: 10px;text-align: center;" id="enjoyMsg"></p></b><button data-toggle="modal" data-target="#reward" class="btn btn-danger btn-lg" style="padding:4px 10px;font-weight:bold;">打赏</button></div><div class="modal fade" id="reward" tabindex="-1" role="dialog" aria-labelledby="rewardLabel" aria-hidden="true"><div class="modal-dialog" style="max-width:365px"><div class="modal-content"><div class="modal-body"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><ul id="payTabs" class="nav nav-tabs"><li class="active"><a href="#wechat_pay" data-toggle="tab">微信</a></li><li><a href="#alipay" data-toggle="tab">支付宝</a></li></ul><div id="payMethod" class="tab-content"><div class="tab-pane fade in active" id="wechat_pay"><img src="/img/cut-pic/wechat_pay.png" alt="wechat_pay" data-bd-imgshare-binded="1"></div><div class="tab-pane fade" id="alipay"><img src="/img/cut-pic/alipay.png" alt="alipay" data-bd-imgshare-binded="1"></div></div></div></div></div></div><script defer="defer" src="/js/popper.min.js"></script><script defer="defer" src="https://cdn.bootcss.com/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script defer="defer" src="/js/custom.js"></script><div class="social-share" data-image="https://www.livejq.top/img/livejqTop.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div><div id="current-post-cover" data-scr="/img/post-cover/21.jpg"></div><!-- relate post, comment...--><div class="investment-container"><!-- Ads auto_flower --> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2863856337188342" data-ad-slot="3371715010" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script><div class="investment-header"><div class="investment-title-1"><div class="on">留言评论</div><div>推荐阅读</div></div><div class="investment-title-2"><span><a href="javascript: window.scrollTo(0, 0);">返回顶部</a> <a href="/2019/errors-when-hexo-g-generates-static-files.html" title="Hexo G命令生成静态文件时出现渲染错误" rel="prev">&laquo;上一篇 </a><a href="/2019/create-a-personal-blog-using-hexo.html" title="基于Hexo框架的个人博客搭建" rel="next">下一篇&raquo;</a></span></div></div><div class="investment-content below-content"><div class="investment-content-list"><div class="layout-comment"><!-- comment gitalk --><!-- show gitalk comment --><div id="gitalk-container"></div><!-- gitalk`s css & js --><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><link rel="stylesheet" href="/css/comment.css"><script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script type="text/javascript">//Thanks O-R
	//https://github.com/gitalk/gitalk/issues/102#issuecomment-382970552
	//去除尾部匹配正则数组的字符串  
	//Remove redundant characters
	String.prototype.trimEnd = function (regStr) {
		var result = this;
		if (regStr == undefined || regStr == null || regStr == "") {
			return result;
		}
		var array = regStr.split(',');

		if (array.length > 0) {

			var c = array.shift();
			var str = this;
			var i = str.length;
			var rg = new RegExp(c);
			var matchArr = str.match(rg);

			if (matchArr != undefined && matchArr != null && matchArr.length > 0) {
				var matchStr = matchArr[0].replace(/\\/g, "\\\\").replace(/\*/g, "\\*")
					.replace(/\+/g, "\\+").replace(/\|/g, "\\|")
					.replace(/\{/g, "\\{").replace(/\}/g, "\\}")
					.replace(/\(/g, "\\(").replace(/\)/g, "\\)")
					.replace(/\^/g, "\\^").replace(/\$/g, "\\$")
					.replace(/\[/g, "\\[").replace(/\]/g, "\\]")
					.replace(/\?/g, "\\?").replace(/\,/g, "\\,")
					.replace(/\./g, "\\.").replace(/\&/g, "\\&");
				matchStr = matchStr + '$';
				result = str.replace(new RegExp(matchStr), "");
			}

			if (array.length > 0) {
				return result.trimEnd(array.join())
			} else {
				return result;
			}
		}
	};

	//Create gitalk
	var gitalk = new Gitalk({
		clientID: 'eb98d993a6a7d3c934aa',
		clientSecret: '2421ea27774da88b3b14422a95ee2557c435908c',
		//id: window.location.pathname,
		//id: decodeURI(window.location.pathname),
		//id: (window.location.pathname).split("/").pop().substring(0, 49),
		id: decodeURI(md5(location.href.trimEnd('#.*$,\\?.*$,index.html$'))),
		repo: 'blog-comment-repo',
		owner: 'livejq',
		admin: 'livejq',
		distractionFreeMode: 'true',
	})
	gitalk.render('gitalk-container');</script></div></div><div class="investment-content-list"><div class="relate-post"><ul><li><div><a href="/2019/errors-when-hexo-g-generates-static-files.html" title="Hexo G命令生成静态文件时出现渲染错误">Hexo G命令生成静态文件时出现渲染错误</a><p>遇到错误 报错信息如下： @lenovo ➜ blog git:(master) ✗ hexo g INFO Start proc...</p></div><a href="/2019/errors-when-hexo-g-generates-static-files.html" title="Hexo G命令生成静态文件时出现渲染错误"><img src="/img/post-cover/54.jpg" class="relateImg" alt="Hexo G命令生成静态文件时出现渲染错误"></a></li><li><div><a href="/2019/create-a-personal-blog-using-hexo.html" title="基于Hexo框架的个人博客搭建">基于Hexo框架的个人博客搭建</a><p>Github+Node.js+Hexo框架，搭建个人博客本人是参考了这篇 专栏 一步一步完成搭建的基本工作的，基本上不用半天就可以搞定...</p></div><a href="/2019/create-a-personal-blog-using-hexo.html" title="基于Hexo框架的个人博客搭建"><img src="/img/post-cover/1.jpg" class="relateImg" alt="基于Hexo框架的个人博客搭建"></a></li></ul></div></div></div></div></div><!-- show math formula --><link rel="stylesheet" href="https://cdn.bootcss.com/lightgallery/1.6.4/css/lightgallery.css" type="text/css"><script src="https://cdn.bootcss.com/lightgallery/1.6.4/js/lightgallery-all.min.js"></script><script type="text/javascript">var postTitle = $('.article-title a').text() ? $('.article-title a').text() : "No post title!";
	$('.article-content img').each(function () {
		var imgPath = $(this).attr('src'),
			imgTitle = $(this).attr('alt') ? $(this).attr('alt') : "No image description!";
		$(this).wrap('<div class="img-responsive" data-src="' + imgPath + '" data-responsive="' + imgPath +
			'" data-sub-html="<p>图片 ' + imgTitle + '</p><h4>文章' + postTitle + '</h4>"></div>');
	});

	$('.article-content').lightGallery({
		mode: 'lg-slide',
		selector: '.img-responsive',
		share: false,
		zoom: false,
		download: false
	});
	//TODO：支持video</script><!--
	时间：2018-11-17
	描述：
		插件名称：katelog.min.js
		插件作者：KELEN
		插件来源: https://github.com/KELEN/katelog
--><div class="k-catelog-list" id="catelog-list" data-title="文章目录"></div><script src="/plugin/toc/katelog.min.js"></script></main><!--footer--><footer><div class="social"><ul><li><a href="https://github.com/livejq" target="_blank"><i class="fab fa-github"></i></a></li><li><a href="mailto:cloud@livejq.fun" target="_blank"><i class="far fa-envelope"></i></a></li><li><a href="https://t.me/livejq" target="_blank"><i class="fab fa-telegram"></i></a></li><li><a href="https://www.livejq.top/atom.xml" target="_blank"><i class="fas fa-rss"></i></a></li><li><a href="https://myssl.com/www.livejq.top?from=mysslid" target="_blank"><i class="fab fa-expeditedssl"></i></a></li></ul></div><div class="copyright"><span>&copy;2018 - 2021</span><span class="with-love"><i class="fas fa-heart"></i></span><span><a href="https://www.livejq.top" rel="noopener nofollow" style="color: #DAA520">liveJQ</a></span> <span><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-creative-commons"></i>BY-NC-SA.</a></span><script src="/js/stayComm.js" type="text/javascript"></script><p></p></div><canvas id="evanyou"></canvas><!-- Baidu auto push --><script>(function () {
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
				bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			} else {
				bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
		})();</script><!-- Global site tag (gtag.js) - Google Analytics --><script src="https://www.googletagmanager.com/gtag/js?id=UA-144162513-1"></script><script>window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'UA-144162513-1');</script></footer><!-- set '1' to show motto in all pages! --><script src="/js/motto.js"></script><script async>$(".motto").html(getMingYanContent());</script><!--
	时间：2018-10-3
	描述：
		插件名称：hexo-generator-search-zip
		插件来源: https://github.com/SuperKieran/hexo-generator-search-zip
		代码参考：https://github.com/SuperKieran/TKL/blob/master/layout/_partial/search.ejs(Include: js & css)
--><div class="popup search-popup local-search-popup"><div class="local-search-container"><span class="popup-btn-close">ESC</span><div class="local-search-header"><input autocomplete="off" placeholder="Search..." type="text" id="local-search-input"></div><div class="local-search-body"><div id="local-search-output"></div></div></div></div><script src="/js/ziploader.js"></script><script src="/js/search.js"></script><script>var search_path = 'search.json',
		zip_Path = '/search.zip',
		version_Path = '/searchVersion.txt',
		input_Trigger = 'auto',
		top_N = '3';

	themeLocalSearch({
		search_path,
		zip_Path,
		version_Path,
		input_Trigger,
		top_N
	});</script><script src="/js/love.js"></script><!--back to top--><div id="totop"><a href="javascript:;" name="TOTOP" class="fa fa-arrow-up"></a></div><script src="/js/chinese.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/gh/emn178/js-sha1/build/sha1.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script src="/plugin/clipboard/codecopy.js"></script><script async type="text/javascript" src="/js/evanyou.js"></script></body></html>