jQuery(document).ready((function(t){"use strict";var a,o,e,n,i,r,s,l=t("header").outerHeight(),c=t("#article-content").outerHeight();(function(){var a=t("header").attr("data-img-mode"),o=" ",e=t("header").attr("data-random-max"),n=0;function i(){t("html, body").delay(1e3).animate({scrollTop:l+2},1500)}function r(){t("#status").fadeOut(),t("#preloader").delay(550).fadeOut("slow"),t("body").delay(550).css({display:"block"})}"random"==a?(n=Math.floor(Math.random()*(e-1)+1),o=t("header").attr("data-random-src")+n+".jpg"):o="normal"==a?t("header").attr("data-normal-src"):"https://source.unsplash.com/collection/954550/1920x1080",t(".layout-post").length&&(o=t("#current-post-cover").attr("data-scr"));var s=new Image,c=setTimeout((function(){return console.log("timeout"),r(),void i()}),8e3);s.crossOrigin="Anonymous",s.src=o,s.onerror=function(){c&&clearTimeout(c),r(),i(),console.log("Failed to load & set background img for header!")},s.onload=function(){var a,o;c&&clearTimeout(c),a=s.src,o="url("+a+")",t("header").css("background-image",o),r(),t(".layout-post").length&&i(),t("#navigation-S a, #logo-S a").css({color:"#fff"}),t("#navigation-S a, #logo-S a").each((function(){t(this).hover((function(){t(this).css({color:"darkgoldenrod"})}),(function(){t(this).css({color:"#fff"})}))}))}})(),function(){function a(a){t(".nav-container").toggleClass("is-visible",a)}var o,e;t(".nav-trigger").on("click",(function(o){o.preventDefault(),a(!0),t("body").css("overflow","hidden")})),t(".nav-close").on("click",(function(o){o.preventDefault(),a(!1),t("body").css("overflow","auto")})),o=location.href,e=!1,t("#navigation-S a").each((function(){var a=t(this).attr("class");a=a.substr(10),o.indexOf(a)>-1&&""!=t(this).attr("href")?(t(this).addClass("active"),e=!0):t(this).removeClass("active")})),!e&&t("#layout-cart, #layout-pure, #layout-poem").length&&t("#navigation-S a").eq(0).addClass("active")}(),t(window).scroll((function(){var a=t(window).scrollTop(),o=t(document).height(),e=t(window).height(),n=0;((n=(n=t(".layout-post").length?(a-l)/(c+200-e)*100:a/(o-e)*100).toFixed(1))>100||n<0)&&(n=100),t("#progress-percentage h1").text(n+"%"),t("#progress-bar").attr("style","width: "+n+"%; display: block;"),a>=(500>l?500:l)?(t("#navigation-H").css({top:"0"}).show(),t(".nav-trigger").show()):(t("#navigation-H").css({top:"-60px"}).hide(),t(".nav-trigger").hide()),a>=l+300?t("#navigation-H p").show():t("#navigation-H p").hide()})).trigger("scroll"),a=l,o=l+c,t(window).scroll((function(){var e=t(document).scrollTop();e>=a&&e<o?t("#catelog-list").css("position","fixed").show().fadeIn(550):t("#catelog-list").hide().fadeOut(550)})),t("#catelog-list").length&&new katelog({contentEl:"article-content",catelogEl:"catelog-list",linkClass:"k-catelog-link",linkActiveClass:"k-catelog-link-active",selector:["h1","h2","h3","h4","h5","h6"],supplyTop:20,active:function(t){}}),e=t("#totop"),n=t("#read-more"),e.hide(),t(window).scroll((function(){t(document).scrollTop()>500?t(e).stop().fadeTo(550,1):t(e).stop().fadeTo(550,0)})),t(e).click((function(){return t("html, body").animate({scrollTop:0},500),!1})),t(n).click((function(){return t("html, body").animate({scrollTop:t("main").offset().top+2},500),!1})),function(){if(-1!=window.location.pathname.indexOf("archive")){var a="",o="";t("#layout-archive-year  ul li").each((function(e){var n=t(this).find("em").attr("year");(n<a||""==a)&&(a=n,""==o&&(o=n),t(this).before("<h3 class='"+a+"'>"+a+"<em>("+t("[year='"+a+"']").length+"篇)</em></h3>")),t(this).attr("year",a)})),t("#layout-archive-year h3").each((function(){t("#layout-archive-year ul li[year='"+t(this).attr("class")+"'").wrapAll("<div year='"+t(this).attr("class")+"'></div>"),t("h3."+t(this).attr("class")).click((function(){t(this).toggleClass("title-bg").next().slideToggle(300)}))})),t("#layout-archive-year ul div[year!='"+o+"']").hide(),t("h3."+o).addClass("title-bg")}}(),t("body").on("click","#pagination a",(function(){return t(this).text(" ").addClass("annie-animation-2"),t.ajax({type:"get",url:t(this).attr("href"),async:!0,error:function(t){},success:function(a){var o=t(a).find("#post"),e=t(a).find("#pagination a").attr("href");t("#layout-cart, #layout-pure, #layout-poem").append(o.fadeIn(550).addClass("annie-animation-1")),t("#pagination a").removeClass("annie-animation-2").text(t("#pagination a").attr("data-title")),null!=e?t("#pagination a").attr("href",e):t("#pagination").html("<span>"+t("#pagination a").attr("data-status")+"</span>")}}),!1})),i=".investment-title-1",r="on",t(s=".investment-content").each((function(){t(this).children().eq(0).show()})),t(i).each((function(){t(this).children().eq(0).addClass(r)})),t(i).children().click((function(){t(this).addClass(r).siblings().removeClass(r);var a=t(i).children().index(this);t(s).children().eq(a).show().siblings().hide()})),t(".tags a, .category a").click((function(){t("#TCP-title").text("查询结果"),t("#TCP-content").text("");var a=t(this).attr("href");return null!=a&&t.ajax({url:a,type:"get",async:!0,error:function(t){},success:function(a){var o=t(a).find(".layout-archive");t("#TCP-content").append(o.fadeIn(500).addClass("annie-animation-1")),t(".layout-archive").css({paddingTop:"0"}),t(".layout-archive i").css({marginTop:"5px",marginBottom:"30px"})}}),!1}))}));